<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="main"></div>
<script src="browser.min.js"></script>
<script src="react.development.js"></script>
<script src="react-dom.development.js"></script>
<script type="text/babel">
class Main extends React.Component{
    constructor(props){
        super(props);
        this.state={
            count:200,
        }
    }
    change(m){
        this.setState({
            count:this.state.count-m
        })
    }
    render(){
        return(
        <div>
            <h2>全部士兵数量</h2>{this.state.count}
            <Contain name="将军A有士兵:" val={20} num={100} count={this.state.count} myClick={this.change.bind(this)}></Contain>
            <Contain name="将军B有士兵:" val={10}num={90}count={this.state.count} myClick={this.change.bind(this)}></Contain>
        </div>
        );
}
}
class Contain extends React.Component{
    constructor(props){
        super(props);
        this.state={
           num:this.props.num
        }
    }

    change(m){
        if(this.props.count>=m){
        this.setState({
            num:this.state.num+m
        });
        this.props.myClick(m);
    }else{
            alert('士兵数量不足。。。')
        }
}
    render(){
        return(
        <div>
            <p>{this.props.name}{this.state.num}</p>
            <button onClick={this.change.bind(this,this.props.val)}>调兵</button>
        </div>
        );
    }
}
    ReactDOM.render(
        <Main></Main>,
            document.getElementById('main')
    )
</script>
</body>
</html>